# ============================================================================
# PDF/Image Processor - Environment Variables
# Cole estas variáveis no Easypanel > Services > Environment Variables
# ============================================================================

# ----------------------------------------------------------------------------
# GUNICORN CONFIGURATION
# ----------------------------------------------------------------------------

# Número de workers (padrão: 2)
# Fórmula: (RAM_GB * 0.7) / 0.15
# Exemplo: 2GB RAM → 9 workers max, mas use 2-4 para início
GUNICORN_WORKERS=2

# Timeout para requests (segundos)
GUNICORN_TIMEOUT=120

# Max requests antes de reiniciar worker (previne memory leak)
GUNICORN_MAX_REQUESTS=1000

# Jitter para max_requests (randomização)
GUNICORN_MAX_REQUESTS_JITTER=100

# Worker class (sync para CPU-bound tasks)
GUNICORN_WORKER_CLASS=sync

# Bind address (não alterar no Docker)
GUNICORN_BIND=0.0.0.0:8000

# Log level (debug, info, warning, error, critical)
GUNICORN_LOGLEVEL=info

# Preload app (carrega código antes de forkar workers)
GUNICORN_PRELOAD_APP=true

# Graceful timeout
GUNICORN_GRACEFUL_TIMEOUT=30

# Keepalive
GUNICORN_KEEPALIVE=5

# ----------------------------------------------------------------------------
# REDIS CONFIGURATION (para Rate Limiting)
# ----------------------------------------------------------------------------

# URL do Redis
# Formato: redis://[usuario:senha@]host:porta/db
# Exemplos:
#   - Sem Redis: memory://
#   - Redis local: redis://localhost:6379/0
#   - Redis com senha: redis://:senha123@redis:6379/0
#   - Redis Cloud: redis://user:pass@redis-cloud.com:6379/0
REDIS_URL=memory://

# Alternativa: separar host/porta/senha
# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DB=0

# ----------------------------------------------------------------------------
# FLASK CONFIGURATION
# ----------------------------------------------------------------------------

# Environment (production, development)
FLASK_ENV=production

# Timezone
TZ=America/Sao_Paulo

# ----------------------------------------------------------------------------
# APPLICATION CONFIGURATION
# ----------------------------------------------------------------------------

# Max file size (bytes) - padrão: 30MB
MAX_CONTENT_LENGTH=31457280

# Dimensões de processamento
MIN_DIMENSION=1200
MAX_DIMENSION=3500

# Qualidade JPEG de saída (0-100)
JPEG_QUALITY=92

# DPI para conversão de PDF
PDF_DPI=200

# ----------------------------------------------------------------------------
# RATE LIMITING
# ----------------------------------------------------------------------------

# Limite por minuto
RATE_LIMIT_PER_MINUTE=10

# Limite por hora
RATE_LIMIT_PER_HOUR=100

# ----------------------------------------------------------------------------
# LOGGING
# ----------------------------------------------------------------------------

# Log level da aplicação
LOG_LEVEL=INFO
